{% extends 'base.html' %}
{% load static %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ ad.title }}</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <div class="ad-container">
        <h1>{{ ad.title }}</h1>
        <p>{{ ad.description }}</p>
        <p class="price">–¶–µ–Ω–∞: {{ ad.price }} —Ç–≥.</p>
        
        <div class="action-buttons">
            <a href="{% url 'ad_list' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</a>
            {% if request.user == ad.author %}
                <a href="{% url 'ad_edit' ad.id %}" class="btn btn-edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <a href="{% url 'ad_delete' ad.id %}" class="btn btn-danger">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
            {% endif %}
            
            
            {% if request.user != ad.author %}
                <a href="{% url 'chat:room' ad.author.id %}" class="btn btn-chat">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É</a>
            {% endif %}
            
            
            {% if request.user != ad.author %}
                <a href="{% url 'add_review' ad.id %}" class="btn btn-review">‚òÖ –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</a>
            {% endif %}
        </div>

        
        <div class="reviews-section">
            <h3>–û—Ç–∑—ã–≤—ã –æ –ø—Ä–æ–¥–∞–≤—Ü–µ:</h3>
            {% for review in ad.reviews.all %}
                <div class="review-card {% if review.is_approved %}approved{% else %}pending{% endif %}">
                    <div class="review-header">
                        <strong>{{ review.author.username }}</strong>
                        <span class="rating">{{ review.get_rating_display }}</span>
                    </div>
                    <p class="review-text">{{ review.text }}</p>
                    <small class="review-date">{{ review.created_at|date:"d.m.Y H:i" }}</small>
                </div>
            {% empty %}
                <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤.</p>
            {% endfor %}
        </div>
    </div>
</body>
</html>